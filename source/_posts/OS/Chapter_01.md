---
title: 第一章 计算机系统概述
math: true
date: 2023-06-17 14:07:54
---

{% markmap 750px %}

- 计算机系统概述
  - 操作系统的基本概念
    - 操作系统的概念
      - 控制和管理整个计算机系统的硬件与软件资源
      - 组织、调度计算机的工作和资源的分配
      - 为用户和其他软件提供接口与环境的程序集合
    - 操作系统的特征
      - 并发：计算机中在同一时间内有多个程序运行
      - 共享：系统中的资源可供给内存中多个并发的进程同时使用
        - 互斥共享：在一段时间内只允许一个进程访问
        - 同时访问：允许在一段时间内同时有多个进程访问。
      - 虚拟：把一个物理上的实体变为若干逻辑上的对应物。
        - 虚拟处理器技术：通过多道程序设计技术，采用让多道程序兵法执行的方法，来分时使用一个处理器
        - 虚拟存储器技术
        - 虚拟设备技术
      - 异步：由于资源的限制，进程的执行并不是一贯到底的，而是走走停停的，它以不可预测的速度向前推进。
    - 操作系统的目的和功能
      - 作为计算机系统资源的管理者
        - 提供的功能
          - 处理管理
          - 存储管理
          - 文件管理
          - 设备管理
        - 目的：使计算机安全、高效
      - 作为用户和计算机硬件之间的接口
        - 提供的功能
          - 命令接口
            - 联机命令（交互）
            - 脱机命令（批处理）
          - 程序接口
            - 系统调用（广义指令）
            - 图形用户界面（图形接口）
        - 目的：让用户方便、快捷、可靠地操纵计算机硬件资源并运行自己的程序
      - 实现对计算机资源的扩充
  - 操作系统运行环境
    - 处理器运行模式
      - 特权指令：I/O指令、置中断指令、存取用于内存保护的寄存器、送程序状态子到程序状态字寄存器的指令。
      - 非特权指令
      - 用户态：执行非特权指令
      - 核心态：执行特权指令，内核程序运行在核心态
      - 应用程序向操作系统请求服务时通过使用访管指令，从而产生一个中断事件将操作系统转换为核心态。
      - 与硬件相关的程序和运行频率高的程序构成了操作系统的内核
      - 内核：计算机上配置的底层软件，它管理着系统的各种资源，可以看作是连接应用程序和硬件的一座桥梁。
      - 内核的四个方面
        - 时钟管理：（1）计时（2）通过时钟中断的管理，实现进程的切换
        - 中断机制：让操作系统内核夺回CPU使用权的唯一途径
        - 原语:可通过关中断的方法来定义原语
          - 处于操作系统的最底层，是最接近硬件的部分。
          - 原语具有原子性，操作一气呵成。
          - 原语运行时间短且频繁。
        - 系统控制的数据结构及处理
          - 进程管理：进程状态管理、进程调度和分派、创建与撤销进程控制块
          - 存储管理：存储的空间分配和回收、内存信息保护程序、代码对换程序
          - 设备管理：缓冲区管理、设备分配和回收
    - 中断和异常的概念
      - 中断（外中断）：来自CPU执行指令外部的事件，通常用于信息的输入/输出
      - 异常（内中断）：来自CPU执行指令内部的事件，异常通常不能够被屏蔽，一旦出现，就应该立即处理。
    - 中断和异常的分类
      - 中断
        - 可屏蔽中断 INTR
        - 不可屏蔽中断 NMI
      - 异常
        - 故障：指令执行引起的异常。如除0、缺页故障、运算溢出
        - 自陷：一种事先安排的”异常“事件，用在用户状态下调用操作系统内核程序
        - 终止：出现了使得CPU无法执行的硬件故障
    - 系统调用：用户在程序中调用操作系统提供的一些子功能
      - 系统调用分类
        - 设备管理（设备的请求、释放或创建）
        - 文件管理（文件的读、写、创建、删除等操作）
        - 进程管理（进程的创建、撤销、阻塞及唤醒等功能）
        - 进程通信（进程之间的消息传递或信号传递等功能）
        - 内存管理（内存的分配、回收等功能呢）
      - 系统调用的处理需要由操作系统内核程序负责完成，要运行在内核态
      - 用户程序可以执行trap指令来发起系统调用
      - 用户程序不能直接执行对系统影响非常大的操作，必须通过系统调用的方式请求操作系统代为执行，以便保证系统的稳定性和安全性，防止用户程序随意更改或访问重要的系统资源，影响其他进程的运行。
      - 用户态转内核态的例子
        - 系统调用
        - 发生一次中断
        - 用户程序中产生了一个错误状态
        - 从核心态转向用户态由一条特权指令实现，一般为中断返回指令。
        - 从用户态转向核心态，会用到访管指令，运行在用户态，它为非特权指令。
  - 操作系统结构
    - 分层法：将操作系统分为若干层，最低成为硬件层，最高层为用户接口层，每一层只能调用与它相邻的底层的功能和服务（单向依赖）。
      - 优点：
        - 便于系统的调试和验证，简化了系统的设计和实现
        - 易扩充和易维护
      - 缺点：
        - 合理定义各层比较困难
        - 效率比较差
    - 模块化：将操作系统按功能划分为若干具有一定独立性的模块
      - 模块-接口法：将各个模块细分为若干具有一定功能的子模块，同样也规定好格子模块之间的接口
      - 衡量模块独立性的标准：高内聚低耦合
      - 模块化的优点
        - 提高了操作系统设计的正确性、可理解性和可维护性
        - 增强了操作系统的可适应性
        - 加速了操作系统的开发过程
      - 模块化的缺点
        - 模块间的接口规定很难满足对接口的实际需求
        - 各模块设计者齐头并进，每个决定无法建立在上一个已验证的正确决定的基础上，因此无法找到一个可靠的决定顺序。
    - 宏内核（单内核或大内核）：将系统的主要功能模块作为一个紧密联系的整体运行在核心态，从而为用户程序提供高性能的系统服务。
    - 微内核
      - 基本概念
      - 基本功能
        - 进程（线程）管理
        - 低级存储器管理
        - 中断和陷入处理
      - 特点
        - 扩展性和灵活性
        - 可靠性和安全性
        - 可移植性
        - 分布式计算
    - 外核
  - 操作系统引导
    - 操作系统引导：计算机利用CPU运行特定程序，通过识别硬盘分区，识别硬盘分区上的操作系统，最后通过程序启动操作系统
    - 操作系统的引导过程
      - 激活CPU
      - 硬件自检
      - 家在带有操作系统的磁盘
      - 加载主引导记录MBR
      - 扫描硬盘分区表
      - 加载分区引导记录PBR
      - 加载启动管理器
      - 加载操作系统
  - 虚拟机
    - 虚拟机的基本概念
      - 一台逻辑计算机，是指利用特殊的虚拟技术，通过隐藏特定计算平台的实际无力特性，为用户提供抽象的、统一的、模拟的计算环境。
      - 第一类虚拟机管理程序（直接运行在硬件上）——裸金属架构
      - 第二类虚拟机管理程序（运行在宿主操作系统上）——寄居架构

{% endmarkmap %}